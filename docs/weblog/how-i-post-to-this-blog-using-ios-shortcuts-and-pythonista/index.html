<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="EDIT: This blog is now hosted using Hugo, not Jekyll. I have to find a way to migrate what I&rsquo;ve described here.
I&rsquo;ve had this blog for many years, and basically never posted anything. I wanted to become better about that, so I&rsquo;ve been writing more haikus and trying to write up some of my home projects. My blog uses Jekyll and is hosted on Github Pages which already makes it pretty easy to write content but I wanted to see if I could make it even easier.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="How I (used to) post to this blog using iOS Shortcuts and Pythonista" />
<meta property="og:description" content="EDIT: This blog is now hosted using Hugo, not Jekyll. I have to find a way to migrate what I&rsquo;ve described here.
I&rsquo;ve had this blog for many years, and basically never posted anything. I wanted to become better about that, so I&rsquo;ve been writing more haikus and trying to write up some of my home projects. My blog uses Jekyll and is hosted on Github Pages which already makes it pretty easy to write content but I wanted to see if I could make it even easier." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jakevanalstyne.me/docs/weblog/how-i-post-to-this-blog-using-ios-shortcuts-and-pythonista/" />
<meta property="article:published_time" content="2020-03-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-03-26T00:00:00+00:00" />
<title>How I (used to) post to this blog using iOS Shortcuts and Pythonista | Jake Van Alstyne</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;500&display=swap');
</style>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.cedc49a3c29c32a579fbb8aa34d4e02ee0aa5eab0924bf1af940c4233feadad6.css" integrity="sha256-ztxJo8KcMqV5&#43;7iqNNTgLuCqXqsJJL8a&#43;UDEIz/q2tY=">
<script defer src="/en.search.min.df220a8564b47f54296c690be1507819fcd230c46fa25a07d66410ddf129b9a4.js" integrity="sha256-3yIKhWS0f1QpbGkL4VB4GfzSMMRvoloH1mQQ3fEpuaQ="></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-39509409-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
<nav>
<h2 class="book-brand">
  <a href="/"><span>Jake Van Alstyne</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/weblog/" class="collapsed ">Weblog</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/weblog/chess_and_incompleteness/" class="">Chess and Incompleteness</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/weblog/stony/" class="">Stony</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/weblog/how-i-post-to-this-blog-using-ios-shortcuts-and-pythonista/" class="active">How I (used to) post to this blog using iOS Shortcuts and Pythonista</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/weblog/gpg-yubikey-you/" class="">GPG &amp; YubiKey &amp; You</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/weblog/raspberry-pi-btc-node/" class="">Raspberry Pi BTC Node</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/weblog/diy-nas/" class="">Building my own NAS</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/haikulog/" class="collapsed ">Haikulog</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/travelog/" class="collapsed ">Travelog</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/about/" class="">About</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/resume/" class="">Resume</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
  </ul>
  















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>



      
    </aside>

    <div class="book-page">
      <header class="book-header">
        
<div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>How I (used to) post to this blog using iOS Shortcuts and Pythonista</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>



<input type="checkbox" class="hidden" id="toc-control" />
<aside class="hidden clearfix">
  
<nav id="TableOfContents"></nav>


</aside>


        
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/docs/weblog/how-i-post-to-this-blog-using-ios-shortcuts-and-pythonista/">How I (used to) post to this blog using iOS Shortcuts and Pythonista</a>
  </h1>
  
  <h5>March 26, 2020</h5>



  
  <div>
    
      <a href="/categories/diy/">DIY</a>
  </div>
  

  


  <p><p>EDIT: This blog is now hosted using Hugo, not Jekyll. I have to find a way to migrate what I&rsquo;ve described here.</p>
<p>I&rsquo;ve had this blog for many years, and basically never posted anything. I wanted to become better about that, so I&rsquo;ve been writing more haikus and trying to write up some of my home projects. My blog uses <a href="https://jekyllrb.com">Jekyll</a> and is hosted on <a href="https://pages.github.com">Github Pages</a> which already makes it pretty easy to write content but I wanted to see if I could make it even easier. I started with a &ldquo;create new haiku&rdquo; shortcut. This way anytime I have an idea for a haiku it doesn&rsquo;t matter where I am, as long as I have an internet connection on my phone I can post a new one easily.</p>
<p>So, I began playing with iOS Shortcuts. I wanted a button on my phone that would let me write and post to my blog without needing anything else. The solution I came up with uses a bit of Python in <a href="https://omz-software.com/pythonista/">Pythonista</a> for some formatting, as well as <a href="https://workingcopyapp.com">Working Copy</a> for the git actions.</p>
<p>Unfornately, the only way to share an iOS shortcut is to share it directly. I wanted to export and paste a JSON payload here or something so others could edit and import easily, but it looks like the only way is to share a public link to it. So, here&rsquo;s my <a href="https://www.icloud.com/shortcuts/7d86a57504eb47098bc7d1290e3239d6">shortcut</a> for writing and posting a haiku. With a little editing it should be easy enough to change if you wanted to rework it to post to your own blog. It assumes you have the Working Copy app I linked above, as well as a Pythonista script.</p>
<p>Here are the actions it performs:</p>
<ul>
<li>Pull the latest changes from your blog repo</li>
<li>Ask for the name of the Haiku</li>
<li>Executes a search in <a href="https://giphy.com">Giphy</a> for the given title and lets you choose your favorite gif</li>
<li>Stages the chosen gif in <code>/assets</code> in your repo</li>
<li>Asks for the content of the Haiku. Adding an empty line between each line of content renders the content on new lines. I haven&rsquo;t figured this part out yet, but if you don&rsquo;t do this the whole haiku ends up on one line.</li>
<li>It then sends the input to the Pythonista script to format it as Jekyll front matter</li>
<li>It takes the resulting formatted content and stages it as a new file in your repo</li>
<li>It commits the changes to your repo and pushes to remote</li>
<li>It then texts my girlfriend to let her know there&rsquo;s a new haiku (I haven&rsquo;t tested this with other people, but I expect that unless you have her number it won&rsquo;t work for you)</li>
</ul>
<p>So now the only piece missing is the Pythonista script. Here it is:</p>
<pre><code>from webbrowser import open
from datetime import date
from urllib.parse import quote, unquote
import sys
import x_callback_url

title=sys.argv[1]
body=sys.argv[2]
gif=quote(sys.argv[3])

haiku='''---
layout: haiku
category: Haikus
title: ''' + title + '''
---


''' + body + '''

![--''' + title + '''--](\{\{ site.url \}\}/assets/''' + gif + '''.gif)'''

x_success = sys.argv[-1] # shortcuts-production://x-callback-url/ic-success/&lt;UUID&gt;
x_cancel = x_success.replace('ic-success', 'ic-cancel')
x_error = x_success.replace('ic-success', 'ic-error')

x_success += '?x-source=Pythonista3'
x_success += '&amp;result=' + quote(haiku)
x_success += '&amp;datetime=' + quote(str(date.today().strftime('%Y-%m-%d')))

open(x_success)
</code></pre><p>I&rsquo;ve been having fun with this, I&rsquo;ve also made a version that will make a full blog post like this one but haven&rsquo;t used it much since writing long form on an iOS device is not that convenient for me. Anyway, if you&rsquo;re reading this feel free to play with my shortcut and python script! I&rsquo;d love to hear about any projects you use them for!</p>
</p>
</article>
<script src="https://utteranc.es/client.js" repo="jakeva/jakeva.github.io" issue-term="pathname" theme="github-dark"
  crossorigin="anonymous" async>
  </script>

      
      

      <footer class="book-footer">
        
<div class="flex flex-wrap justify-between">





</div>


        
        
      </footer>

      

<div class="book-comments">

</div>


      

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
<nav id="TableOfContents"></nav>


      
    </aside>
    
  </main>

  
</body>

</html>












